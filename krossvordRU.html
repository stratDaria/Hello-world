<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Новогодний кроссворд</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #d40000;
    }
    .grid {
      display: inline-grid;
      grid-template-columns: repeat(11, 40px);
      gap: 1px;
      margin: 20px auto;
      background-color: #000;
    }
    .cell {
      width: 40px;
      height: 40px;
      background-color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      text-transform: uppercase;
      position: relative;
    }
    .cell.black {
      background-color: #000;
    }
    .cell input {
      width: 100%;
      height: 100%;
      border: none;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      text-transform: uppercase;
      background: transparent;
      outline: none;
    }
    .cell.number {
      position: absolute;
      top: 2px;
      left: 2px;
      font-size: 10px;
      color: #000;
    }
    .clues {
      max-width: 600px;
      margin: 0 auto;
      text-align: left;
    }
    .clues h2 {
      color: #d40000;
    }
    .clue {
      margin: 5px 0;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #d40000;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #a00000;
    }
    .message {
      margin-top: 15px;
      font-weight: bold;
      color: #007a00;
      height: 25px;
    }
  </style>
</head>
<body>
  <h1>Новогодний кроссворд</h1>

  <div class="grid" id="grid"></div>

  <div class="clues">
    <h2>По горизонтали:</h2>
    <div class="clue">1. Главное новогоднее дерево</div>
    <div class="clue">3. Украшение из лампочек</div>
    <div class="clue">5. Цитрусовый фрукт, символ праздника</div>
    <div class="clue">7. Праздничный напиток с пузырьками</div>
    <div class="clue">9. Дедушка, который щиплет за нос</div>

    <h2>По вертикали:</h2>
    <div class="clue">2. Взрывное украшение неба</div>
    <div class="clue">4. Праздничные башенные часы</div>
    <div class="clue">6. То, что загадывают под бой курантов</div>
    <div class="clue">8. Звуковое новогоднее украшение</div>
    <div class="clue">10. Их хлопают в момент Нового года</div>
  </div>

  <button onclick="checkAnswers()">Проверить ответы</button>
  <div class="message" id="message"></div>

  <script>
    // Слова:
    // Горизонтальные:
    // 1. ЁЛКА (4)
    // 3. ГИРЛЯНДА (9)
    // 5. МАНДАРИНЫ (10)
    // 7. ШАМПАНСКОЕ (11)
    // 9. МОРОЗ (5)

    // Вертикальные:
    // 2. САЛЮТ (5)
    // 4. КУРАНТЫ (7)
    // 6. ЖЕЛАНИЕ (8)
    // 8. ФЕЙЕРВЕРК (9)
    // 10. ХЛОПУШКИ (9)

    // Сетка: 11x11
    const gridData = [
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 0
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 1
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 2
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 3
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 4
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 5
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 6
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 7
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 8
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   ''], // 9
      ['',   '',   '',   '',   '',   '',   '',   '',   '',   '',   '']  //10
    ];

    // Номера подсказок (координаты начала слова и направление)
    const clues = [
      // Горизонтальные
      { word: "ЁЛКА",       row: 0, col: 7, dir: 'h', num: 1 },
      { word: "ГИРЛЯНДА",   row: 2, col: 2, dir: 'h', num: 3 },
      { word: "МАНДАРИНЫ",  row: 4, col: 1, dir: 'h', num: 5 },
      { word: "ШАМПАНСКОЕ", row: 6, col: 0, dir: 'h', num: 7 },
      { word: "МОРОЗ",      row: 8, col: 3, dir: 'h', num: 9 },

      // Вертикальные
      { word: "САЛЮТ",      row: 0, col: 9, dir: 'v', num: 2 },
      { word: "КУРАНТЫ",    row: 2, col: 3, dir: 'v', num: 4 },
      { word: "ЖЕЛАНИЕ",    row: 2, col: 5, dir: 'v', num: 6 },
      { word: "ФЕЙЕРВЕРК",  row: 0, col: 1, dir: 'v', num: 8 },
      { word: "ХЛОПУШКИ",   row: 2, col: 7, dir: 'v', num: 10 }
    ];

    // Заполним сетку и отметим чёрные клетки позже
    const size = 11;

    // Изначально заполним всё пустыми клетками
    for (let r = 0; r < size; r++) {
      for (let c = 0; c < size; c++) {
        gridData[r][c] = '';
      }
    }

    // Заполняем сетку словами
    clues.forEach(clue => {
      const { word, row, col, dir } = clue;
      for (let i = 0; i < word.length; i++) {
        if (dir === 'h') {
          gridData[row][col + i] = word[i].toUpperCase();
        } else {
          gridData[row + i][col] = word[i].toUpperCase();
        }
      }
    });

    // Теперь определим, какие клетки пустые — они будут чёрными
    const isBlack = (r, c) => gridData[r][c] === '';

    // Функция отрисовки сетки
    function renderGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      for (let r = 0; r < size; r++) {
        for (let c = 0; c < size; c++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          if (isBlack(r, c)) {
            cell.classList.add('black');
          } else {
            const input = document.createElement('input');
            input.maxLength = 1;
            input.dataset.row = r;
            input.dataset.col = c;
            input.addEventListener('input', () => {
              input.value = input.value.toUpperCase();
            });
            input.addEventListener('keydown', (e) => {
              if (e.key === 'ArrowDown') {
                e.preventDefault();
                focusCell(r + 1, c);
              } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                focusCell(r - 1, c);
              } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                focusCell(r, c + 1);
              } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                focusCell(r, c - 1);
              }
            });
            cell.appendChild(input);

            // Номер подсказки
            const clueNum = getClueNumber(r, c);
            if (clueNum) {
              const numSpan = document.createElement('span');
              numSpan.className = 'number';
              numSpan.textContent = clueNum;
              cell.appendChild(numSpan);
            }
          }
          grid.appendChild(cell);
        }
      }
    }

    // Вспомогательная функция: определить номер подсказки в клетке
    function getClueNumber(row, col) {
      for (const clue of clues) {
        if (clue.dir === 'h' && clue.row === row && clue.col === col) {
          return clue.num;
        }
        if (clue.dir === 'v' && clue.row === row && clue.col === col) {
          return clue.num;
        }
      }
      return null;
    }

    // Фокус на клетку
    function focusCell(r, c) {
      if (r >= 0 && r < size && c >= 0 && c < size && !isBlack(r, c)) {
        const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
        if (input) input.focus();
      }
    }

    // Проверка ответов
    function checkAnswers() {
      let allCorrect = true;
      const messageDiv = document.getElementById('message');
      messageDiv.textContent = '';

      for (let r = 0; r < size; r++) {
        for (let c = 0; c < size; c++) {
          if (!isBlack(r, c)) {
            const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
            const correctChar = gridData[r][c].toUpperCase();
            const userChar = (input.value || '').toUpperCase();
            if (userChar !== correctChar) {
              allCorrect = false;
              input.style.backgroundColor = '#ffcccc';
            } else {
              input.style.backgroundColor = '#ccffcc';
            }
          }
        }
      }

      if (allCorrect) {
        messageDiv.textContent = 'Поздравляем! Кроссворд решён!';
        messageDiv.style.color = '#007a00';
      } else {
        messageDiv.textContent = 'Есть ошибки. Попробуйте ещё!';
        messageDiv.style.color = '#d40000';
      }
    }

    // Инициализация
    renderGrid();
  </script>
</body>
</html>
